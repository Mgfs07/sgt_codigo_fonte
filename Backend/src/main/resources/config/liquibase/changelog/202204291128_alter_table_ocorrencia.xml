<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.9.xsd">


    <changeSet id="202204291128-1" author="leonardo.inacio">
        <dropForeignKeyConstraint baseTableName="item" constraintName="FK_ITEM_ON_ID_OCORRENCIA"/>
    </changeSet>
    <changeSet id="202204291128-2" author="leonardo.inacio">
        <dropPrimaryKey tableName="ocorrencia" constraintName="pk_ocorrencia"/>
    </changeSet>
    <changeSet id="202204291128-3" author="leonardo.inacio">
        <renameTable oldTableName="ocorrencia" newTableName="registro"/>
    </changeSet>
    <changeSet id="202204291128-4" author="leonardo.inacio">
        <addPrimaryKey tableName="registro" columnNames="id" constraintName="pk_registro"/>
        <addNotNullConstraint tableName="registro" columnName="id"/>
        <dropSequence sequenceName="seq_ocorrencia"/>
        <createSequence sequenceName="seq_registro" startValue="1" incrementBy="1"/>
    </changeSet>
    <changeSet id="202204291128-5" author="leonardo.inacio">
        <renameColumn tableName="registro" oldColumnName="id_tipo_ocorrencia" newColumnName="id_tipo_registro"/>
    </changeSet>
    <changeSet id="202204291128-6" author="leonardo.inacio">
        <renameColumn tableName="registro" oldColumnName="id_status_ocorrencia" newColumnName="id_status_registro"/>
    </changeSet>
    <changeSet id="202204291128-7" author="leonardo.inacio">
        <addForeignKeyConstraint baseTableName="registro" baseColumnNames="id_tipo_registro"
                                 referencedTableName="tipo_registro" referencedColumnNames="id"
                                 constraintName="FK_REGISTRO_ON_ID_TIPO_REGISTRO"/>
    </changeSet>
    <changeSet id="202204291128-8" author="leonardo.inacio">
        <addForeignKeyConstraint baseTableName="registro" baseColumnNames="id_impacto" referencedTableName="impacto"
                                 referencedColumnNames="id" constraintName="FK_REGISTRO_ON_ID_IMPACTO"/>
    </changeSet>
    <changeSet id="202204291128-9" author="leonardo.inacio">
        <addForeignKeyConstraint baseTableName="registro" baseColumnNames="id_status_registro"
                                 referencedTableName="status_registro" referencedColumnNames="id"
                                 constraintName="FK_REGISTRO_ON_ID_STATUS_REGISTRO"/>
    </changeSet>
    <changeSet id="202204291128-10" author="leonardo.inacio">
        <addForeignKeyConstraint baseTableName="registro" baseColumnNames="id_prioridade"
                                 referencedTableName="prioridade" referencedColumnNames="id"
                                 constraintName="FK_REGISTRO_ON_ID_PRIORIDADE"/>
    </changeSet>
    <changeSet id="202204291128-11" author="leonardo.inacio">
        <addForeignKeyConstraint baseTableName="registro" baseColumnNames="id_cliente" referencedTableName="cliente"
                                 referencedColumnNames="id" constraintName="FK_REGISTRO_ON_ID_CLIENTE"/>
    </changeSet>
</databaseChangeLog>
